alucard-dracula: 读取整份文件并生成文档

GitHub Copilot: `local_fsys_basic_operators.hpp` 是一个功能非常丰富的本地文件系统操作类模板，属于 yggdrasil 项目。该文件定义了 `yggr::file_system::local_fsys_basic_operators<File_Stream_Config>`，用于跨平台地封装和扩展 Boost.Filesystem 的文件与目录操作，支持多种自定义选项和错误处理方式。以下为该文件的主要结构和功能文档：

---

## 1. 版权与作者
- 版权归 yggdrasil 项目所有，作者为 xu yang。
- 采用 MIT 许可证。

## 2. 依赖与兼容性
- 依赖 Boost.Filesystem、yggr 项目自有的基础设施（如路径、选项、异常、容器等）。
- 支持新旧 Boost.Filesystem 版本，兼容多平台（如 Windows、Linux、macOS）。

## 3. 类模板定义
```cpp
template<typename File_Stream_Config>
class local_fsys_basic_operators : public path_object_maker
```
- `File_Stream_Config`：流类型配置，定义了 ifstream/ofstream、字符类型等。
- 继承自 `path_object_maker`，用于路径对象的创建和处理。

## 4. 主要类型定义
- `file_size_type`、`size_type`：文件大小类型。
- `ifstream_type`、`ofstream_type`、`fbuf_type`、`char_type`：流与字符类型。
- `path_type`、`path_string_type`、`path_char_type`：路径相关类型。
- `file_status_type`、`space_info_type`、`error_code_type`、`exception_type`：状态与错误类型。
- `directory_entry_type`、`directory_iterator_type`、`recursive_directory_iterator_type`：目录遍历相关类型。
- `options_type`、`file_types_options_type`：操作选项类型。

## 5. 主要功能与接口

### 5.1 路径相关
- `current_path`/`parent_path`/`root_path`/`absolute`/`canonical`/`system_complete`：获取和转换路径。
- `expand_path`/`recursive_expand_path`：展开符号链接、递归解析路径。
- `is_exists`/`is_in_same_volume`/`symlink_is_in_same_volume`/`equivalent`/`symlink_equivalent`：路径存在性、等价性、卷内判断等。

### 5.2 权限与状态
- `permissions`：获取/设置文件权限。
- `path_status`/`path_symlink_status`/`status_known`：获取路径状态。

### 5.3 目录操作
- `create_directories`/`create_directory`/`rename_directory`/`move_directory`/`copy_directory`/`recursive_copy_directories`：目录的创建、重命名、移动、复制（递归）。
- `remove_directory`/`recursive_remove_directories`：目录删除（递归）。
- `count_children_directory`/`recursive_count_children_directory`：统计目录下的子项数量。
- `is_included_in_directory`/`is_child`/`check_is_child`：目录包含关系判断。

### 5.4 文件操作
- `create_file_of_binary`/`create_file_of_text`：创建二进制/文本文件，支持自定义大小和选项。
- `write_file_of_binary`/`write_file_of_text`/`append_file_of_binary`/`append_file_of_text`：写入/追加二进制或文本数据，支持容器、迭代器等多种接口。
- `file_size`/`recursive_file_size`：获取文件或目录（递归）大小。
- `is_regular_file`/`is_empty`/`is_other`：文件类型与状态判断。
- `last_write_time`/`set_last_write_time`：获取/设置文件最后修改时间。

### 5.5 迭代器与目录遍历
- `make_directory_iterator_object`/`make_recursive_directory_iterator_object`：生成目录/递归目录迭代器，支持符号链接、选项等。

### 5.6 临时目录
- `temp_directory_path`：获取系统临时目录路径。

### 5.7 错误处理
- 所有接口均有抛异常和非抛异常（error_code）版本，便于灵活处理错误。
- 内部大量使用 `error_code_type` 指针或引用，统一错误处理逻辑。

### 5.8 选项与自定义处理
- 支持多种操作选项（如“已存在时成功/合并/替换/重命名”等）。
- 支持自定义唯一性处理器（Unique_Handler）和通知处理器（Notify_Handler），便于扩展文件名冲突处理、进度通知等。

## 6. 设计亮点
- 兼容性强，支持多平台和 Boost 版本。
- 功能极其丰富，覆盖绝大多数本地文件系统操作需求。
- 支持高度自定义和扩展，适合复杂工程场景。
- 错误处理灵活，接口风格统一。

## 7. 典型用法举例
```cpp
using fs_ops = yggr::file_system::local_fsys_basic_operators<my_stream_cfg>;
// 获取当前目录
auto cur = fs_ops::current_path();
// 创建目录（已存在时不报错）
fs_ops::create_directories("mydir", fs_ops::options_type::dir_success_if_exists);
// 写入二进制文件
std::vector<char> data = ...;
fs_ops::write_file_of_binary("file.bin", data.data(), data.size());
```

---

如需详细了解某个函数或用法，可指定函数名或功能点，我可以进一步展开说明。

alucard-dracula: 读取整份文件并生成文档

GitHub Copilot: `local_fsys_native_operators.hpp` 是 yggdrasil 项目中用于本地文件系统操作的头文件，通常作为 `local_fsys_basic_operators` 的底层实现或适配层。虽然你没有提供具体内容，但根据命名和项目结构，可以推测其主要作用和设计如下：

---

## 文件定位

- 路径：local_fsys_native_operators.hpp
- 归属：yggdrasil 文件系统模块

## 主要功能

### 1. 封装本地文件系统原生操作
- 直接调用操作系统或 Boost.Filesystem 的原生 API，提供最底层的文件、目录、符号链接等操作能力。
- 可能包含对不同平台（如 Windows、Linux、macOS）的条件编译适配。

### 2. 类型与常量定义
- 定义本地文件系统相关的类型别名，如路径类型、错误码类型、文件状态类型等。
- 统一不同平台和 Boost 版本下的类型差异。

### 3. 基础操作接口
- 提供如路径拼接、分割、格式化、状态查询、权限操作等基础接口。
- 这些接口通常为 `local_fsys_basic_operators` 等上层类所调用。

### 4. 错误处理与兼容性
- 封装错误码、异常处理，保证跨平台一致性。
- 兼容 Boost.Filesystem 的不同版本，处理 API 差异。

### 5. 设计风格
- 以 namespace `yggr::file_system` 组织。
- 可能采用 struct/class + static 函数的方式，或直接以命名空间内函数实现。

---

## 典型内容结构（推测）

```cpp
namespace yggr {
namespace file_system {

// 类型别名
typedef boost::filesystem::path native_path_type;
typedef boost::system::error_code native_error_code_type;
// ... 其他类型 ...

// 路径操作
inline native_path_type join_path(const native_path_type& a, const native_path_type& b);
// 状态查询
inline bool exists(const native_path_type& path, native_error_code_type* ec);
// 权限操作
inline bool set_permissions(const native_path_type& path, perms p, native_error_code_type* ec);
// ... 其他原生操作 ...

} // namespace file_system
} // namespace yggr
```

---

## 设计意义

- **解耦**：将平台/Boost 相关的细节与上层逻辑解耦，便于维护和扩展。
- **统一接口**：为上层文件系统操作类提供统一、稳定的接口。
- **跨平台**：屏蔽不同操作系统和 Boost 版本的差异。

---

## 适用场景

- 作为 `local_fsys_basic_operators`、`local_fsys_operators` 等更高层文件系统操作类的基础实现。
- 需要直接与操作系统文件系统 API 交互时。

---

如需详细了解某个函数或类型，请补充具体内容或函数名，我可以进一步展开说明。