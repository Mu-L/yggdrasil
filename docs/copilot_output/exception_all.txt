alucard-dracula: 为这个文件生成文档

GitHub Copilot: error_code_maker.hpp 文档

---

# error_code_maker.hpp

## 简介

该头文件为 Yggdrasil 框架提供了异常与错误码的统一转换工具。其核心思想是将不同类型的异常（包括标准库异常、Boost 异常等）转换为统一的 `yggr::exception::error_code` 类型，便于跨模块、跨平台的错误处理和日志记录。

## 主要内容

### 命名空间

- `yggr::exception`：主命名空间，包含所有异常相关定义。
- `yggr::exception::detail`：内部实现细节。

### 结构体与模板

- `yggr_inner_exception_code_def`  
  定义内部异常的错误码常量。

- `detail::root_exception_maker<Err>`  
  模板结构体，将异常类型 `Err` 转换为 `error_code`。对 `std::exception` 和 `boost::system::error_code` 提供了特化。

- `error_code_maker<Err>`  
  通用异常到错误码的转换器。根据异常类型自动选择合适的转换策略。对 `boost::system::system_error` 和 `boost::regex_error` 也有特化。

### 典型用法

```cpp
try {
    // ... 可能抛出异常的代码 ...
} catch (const std::exception& e) {
    yggr::exception::error_code_maker<std::exception> maker;
    auto code = maker(e);
    // 处理 code
}
```

### 支持的异常类型

- 标准库异常（`std::exception` 及其子类）
- Boost 系统错误（`boost::system::error_code`, `boost::system::system_error`）
- Boost 正则表达式错误（`boost::regex_error`）
- 其他自定义异常类型

### 依赖

- Yggdrasil 基础库
- Boost 库（system, archive, regex, mpl, type_traits）

## 版权声明

MIT License，作者：xu yang，2010-2024。

---

如需更详细的 API 注释或 Doxygen 风格文档，可进一步补充。是否需要将这些说明以注释形式插入到头文件顶部？

alucard-dracula: 为这个文件生成文档

GitHub Copilot: error_code.hpp 文档

---

# error_code.hpp

## 简介

该头文件定义了 Yggdrasil 框架中用于统一表示错误和异常信息的核心类 `yggr::exception::error_code`。该类支持多字符集、线程安全、时间戳、线程ID等丰富信息，便于跨平台、跨模块的错误追踪和日志记录。

## 主要内容

### 命名空间

- `yggr::exception`：主命名空间，包含所有异常相关定义。

### 核心类

#### `error_code`

用于封装错误码、错误信息、发生时间、线程ID等信息。支持多种构造方式，兼容不同字符串类型和字符集。

**主要成员变量：**
- `_tm`：错误发生的UTC时间戳
- `_trd_id`：线程ID
- `_code`：错误码（`u32`）
- `_msg`：错误信息（UTF-8字符串）

**主要接口：**
- 多种构造函数，支持不同字符串类型、字符集、线程ID等
- `code()`：获取/设置错误码
- `message()`：获取/设置错误信息
- `time()`：获取/设置时间戳
- `thread_id()`：获取/设置线程ID
- `str_time()`：格式化输出时间字符串
- `to_string()`：格式化输出完整错误信息
- 支持拷贝、移动、swap等操作
- 支持流输出（`operator<<`）

### 依赖

- Yggdrasil 基础库（线程、时间、字符串、容器等模块）
- Boost 库（线程、move、enable_if等）

### 典型用法

```cpp
yggr::exception::error_code ec(1001, "file not found");
std::cout << ec.to_string() << std::endl;
```

### 其他

- 提供了 swap 支持，兼容 std/boost 的 swap 机制。
- 支持多字符集和自定义分配器，适合高性能和多语言环境。

## 版权声明

MIT License，作者：xu yang，2010-2024。

---

如需更详细的 API 注释或 Doxygen 风格文档，可进一步补充。是否需要将这些说明以注释形式插入到头文件顶部？

alucard-dracula: 为这个文件生成文档

GitHub Copilot: exception_sort.hpp 文档

---

# exception_sort.hpp

## 简介

该头文件为 Yggdrasil 框架定义了统一的异常错误码区间和常量。通过分段的错误码区间，便于不同模块、不同类型的异常进行分类、管理和扩展，保证错误码的唯一性和可追踪性。

## 主要内容

### 命名空间

- `yggr::exception`：主命名空间，包含所有异常相关定义。

### 核心类

#### `exception_sort`

用于定义和管理错误码区间及特殊错误码常量。

**主要内容：**
- 25个错误码区间（`E_code_start_1` ~ `E_code_end_25`），每个区间长度为0x1000或0x10000，便于模块分配。
- 特殊错误码常量：
  - `E_code_stl_error`：标准库异常错误码
  - `E_code_dtl_db_error`：数据库相关错误码
  - `E_code_dtl_root_error`：底层错误码
  - `E_code_luabind_error`：Lua 绑定相关错误码
  - `E_code_runtime_error`：运行时错误码
  - `E_code_seh_error`：结构化异常处理错误码
  - `E_code_user_error`：用户自定义错误码

### 典型用法

- 用于异常与错误码的映射、分类、日志记录等场景。
- 结合 `error_code` 类和 `error_code_maker` 工具，实现跨模块、跨平台的统一错误处理。

### 依赖

- Yggdrasil 基础库（类型定义、静态常量工具）

## 版权声明

MIT License，作者：xu yang，2010-2024。

---

如需更详细的 API 注释或 Doxygen 风格文档，可进一步补充。是否需要将这些说明以注释形式插入到头文件顶部？

alucard-dracula: 为这个文件生成文档

GitHub Copilot: exception.hpp 文档

---

# exception.hpp

## 简介

该头文件为 Yggdrasil 框架提供了统一的异常处理与日志记录机制。核心类 `yggr::exception::exception` 支持错误码收集、日志访问器绑定、线程安全队列、异常分发与处理等功能，适用于分布式、高并发系统的异常管理。

## 主要内容

### 命名空间

- `yggr::exception`：主命名空间，包含所有异常相关定义。
- `yggr::exception::detail`：内部实现细节。

### 主要类与模板

#### `exception_basic_log_helper`（抽象基类）

- 定义日志访问器的基础接口，要求实现 `append(const error_code&)` 方法。

#### `exception_log_helper<Accesser, StoreConverter=void>`

- 日志访问器适配器，支持自定义存储转换器，将 `error_code` 转换为存储格式并写入外部存储。

#### `exception`

- 异常管理核心类，负责收集、分发、处理错误码。
- 支持多线程安全队列、日志访问器绑定、异常投递与修正、异常输出等。
- 提供静态 `throw_error` 方法，支持多参数、变参模板，便于灵活抛出和记录异常。
- 支持与 `system_controller::ctrl_center` 协作，实现异常的自动修正与处理。

### 典型用法

```cpp
// 抛出并记录异常
yggr::exception::exception::throw_error(1001, "file not found");

// 绑定日志访问器
auto log_ptr = std::make_shared<MyLogAccesser>();
yggr::exception::exception ex;
ex.bind_log_accesser(log_ptr);
```

### 依赖

- Yggdrasil 基础库（线程、时间、智能指针、字符集、容器等模块）
- Boost 库（atomic、线程等）

### 设计亮点

- 支持多线程安全的异常队列
- 支持自定义日志访问器和存储格式
- 支持异常自动修正与分发
- 兼容多字符集和多平台

## 版权声明

MIT License，作者：xu yang，2010-2024。

---

如需更详细的 API 注释或 Doxygen 风格文档，可进一步补充。是否需要将这些说明以注释形式插入到头文件顶部？