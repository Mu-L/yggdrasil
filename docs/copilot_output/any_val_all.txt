alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 any_check.hpp 文件生成的文档说明：

---

# 文件：any_check.hpp

## 简介

any_check.hpp 是 yggdrasil 项目中的头文件，主要用于包含 any_check.hpp，为 `any_val` 相关功能提供类型检查或辅助功能的接口声明。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏：防止重复包含。
- 包含 any_check.hpp，实际实现细节在该文件中。
- 本文件本身不包含具体实现，仅作为接口转发和保护。

## 用法说明

在需要使用 `any_val` 类型检查相关功能时，包含此头文件即可：

```cpp
#include <yggr/any_val/any_check.hpp>
```

## 依赖

- any_check.hpp

---

如需详细功能说明，请参考 any_check.hpp 文件。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 any_operator_mgr_basic_t_reg.hpp 文件生成的文档说明：

---

# 文件：any_operator_mgr_basic_t_reg.hpp

## 简介

any_operator_mgr_basic_t_reg.hpp 是 yggdrasil 项目中用于管理和注册 `any` 类型基础操作符的辅助头文件。它为 `any_val` 提供了基础类型操作符的注册接口，便于对 `any` 类型进行各种算术、逻辑、位运算等操作的支持。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 包含依赖头文件：
  - yggrdef.h
  - ptr_single.hpp
  - any_operator_mgr.hpp
- 定义命名空间 `yggr::any_val`。
- 声明结构体 `any_operator_mgr_basic_t_reg`，用于注册和初始化 `any` 类型的基础操作符。

## 结构体：any_operator_mgr_basic_t_reg

### 类型定义

- `any_operator_mgr_type`：`any_operator_mgr< ::yggr::any>`，用于管理 `any` 类型的操作符。
- `any_operator_mgr_single_type`：`yggr::ptr_single<any_operator_mgr_type>`，单例管理器类型。

### 静态成员函数

- `s_init()` / `s_init(bool binit_base)`：初始化操作符管理器，可选择是否初始化基础类型。
- `s_support_base()`：判断是否支持基础类型操作。
- 一系列 `s_register_base_type_*` 方法：注册各种基础类型的操作符，包括比较、算术、逻辑、位运算、自增自减等。
- 一系列 `prv_s_register_base_type_*` 方法：私有辅助注册函数，通常用于内部实现细节的分步注册。

### 支持的操作符注册（部分示例）

- 比较操作：`greater_equal`, `greater`, `less_equal`, `less`, `equal_to`, `not_equal_to`
- 位运算：`bitwise_not`, `bitwise_and`, `bitwise_or`, `bitwise_xor`, `bitwise_left_shift`, `bitwise_right_shift`
- 逻辑运算：`logic_not`, `logic_and`, `logic_or`
- 算术运算：`plus`, `minus`, `multiplies`, `divides`, `modulus`, `negate`, `posivite`
- 赋值与自增自减：`set`, `tail_increment`, `head_increment`, `tail_decrement`, `head_decrement`

## 用法说明

在需要为 `any` 类型注册基础操作符时，包含此头文件，并调用相关静态方法进行注册。例如：

```cpp
#include <yggr/any_val/any_operator_mgr_basic_t_reg.hpp>

yggr::any_val::any_operator_mgr_basic_t_reg::s_init();
```

## 依赖

- yggrdef.h
- ptr_single.hpp
- any_operator_mgr.hpp

---

如需详细功能和实现细节，请参考对应的实现文件和 `any_operator_mgr` 相关文档。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 any_operator_mgr_boost_basic_t_reg.hpp 文件生成的文档说明：

---

# 文件：any_operator_mgr_boost_basic_t_reg.hpp

## 简介

any_operator_mgr_boost_basic_t_reg.hpp 是 yggdrasil 项目中用于管理和注册 `boost::any` 类型基础操作符的辅助头文件。它为 `any_val` 提供了基础类型操作符的注册接口，便于对 `boost::any` 类型进行各种算术、逻辑、位运算等操作的支持。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 包含依赖头文件：
  - yggrdef.h
  - ptr_single.hpp
  - any_operator_mgr.hpp
- 定义命名空间 `yggr::any_val`。
- 声明结构体 `any_operator_mgr_boost_basic_t_reg`，用于注册和初始化 `boost::any` 类型的基础操作符。

## 结构体：any_operator_mgr_boost_basic_t_reg

### 类型定义

- `any_operator_mgr_type`：`any_operator_mgr<boost::any>`，用于管理 `boost::any` 类型的操作符。
- `any_operator_mgr_single_type`：`yggr::ptr_single<any_operator_mgr_type>`，单例管理器类型。

### 静态成员函数

- `s_init()` / `s_init(bool binit_base)`：初始化操作符管理器，可选择是否初始化基础类型。
- `s_support_base()`：判断是否支持基础类型操作。
- 一系列 `s_register_base_type_*` 方法：注册各种基础类型的操作符，包括比较、算术、逻辑、位运算、自增自减等。
- 一系列 `prv_s_register_base_type_*` 方法：私有辅助注册函数，通常用于内部实现细节的分步注册。

### 支持的操作符注册（部分示例）

- 比较操作：`greater_equal`, `greater`, `less_equal`, `less`, `equal_to`, `not_equal_to`
- 位运算：`bitwise_not`, `bitwise_and`, `bitwise_or`, `bitwise_xor`, `bitwise_left_shift`, `bitwise_right_shift`
- 逻辑运算：`logic_not`, `logic_and`, `logic_or`
- 算术运算：`plus`, `minus`, `multiplies`, `divides`, `modulus`, `negate`, `posivite`
- 赋值与自增自减：`set`, `tail_increment`, `head_increment`, `tail_decrement`, `head_decrement`

## 用法说明

在需要为 `boost::any` 类型注册基础操作符时，包含此头文件，并调用相关静态方法进行注册。例如：

```cpp
#include <yggr/any_val/any_operator_mgr_boost_basic_t_reg.hpp>

yggr::any_val::any_operator_mgr_boost_basic_t_reg::s_init();
```

## 依赖

- yggrdef.h
- ptr_single.hpp
- any_operator_mgr.hpp

---

如需详细功能和实现细节，请参考对应的实现文件和 `any_operator_mgr` 相关文档。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 any_operator_mgr_reg_macro.hpp 文件生成的文档说明：

---

# 文件：any_operator_mgr_reg_macro.hpp

## 简介

any_operator_mgr_reg_macro.hpp 是 yggdrasil 项目中用于简化 `any_operator_mgr` 操作符注册与注销的宏定义头文件。通过一系列宏，用户可以方便地为 `any` 类型或类似类型注册、注销一元和二元操作符，并支持对不安全类型和特定平台（如 MinGW）进行条件编译处理。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 包含依赖头文件：
  - yggrdef.h
- 针对 MinGW 平台的条件编译注释（用于减少库体积，避免 32 位 MinGW 的链接器内存溢出）。
- 一系列操作符注册与注销相关的宏定义，支持一元、二元、可变操作符及其不安全版本。

## 主要宏定义

### 注册宏

- `YGGR_PP_ANY_VAL_REGISTER_UNARY_OPERATOR`
- `YGGR_PP_ANY_VAL_REGISTER_MUTABLE_UNARY_OPERATOR`
- `YGGR_PP_ANY_VAL_REGISTER_UNARY_OPERATOR_UNSAFE`
- `YGGR_PP_ANY_VAL_REGISTER_MUTABLE_UNARY_OPERATOR_UNSAFE`
- `YGGR_PP_ANY_VAL_REGISTER_BINARY_OPERATOR`
- `YGGR_PP_ANY_VAL_REGISTER_MUTABLE_BINARY_OPERATOR`
- `YGGR_PP_ANY_VAL_REGISTER_BINARY_OPERATOR_UNSAFE`
- `YGGR_PP_ANY_VAL_REGISTER_MUTABLE_BINARY_OPERATOR_UNSAFE`

这些宏根据条件编译参数（如 `YGGR_ANY_VAL_OP_NOT_INIT_BASE_TYPE`、`YGGR_ANY_VAL_OP_EXCLUDE_UNSAFE_TYPE`）自动切换为实际注册调用或直接返回 `true`，以适应不同平台和安全需求。

### 注销宏

- `YGGR_PP_ANY_VAL_UNREGISTER_UNARY_OPERATOR`
- `YGGR_PP_ANY_VAL_UNREGISTER_MUTABLE_UNARY_OPERATOR`
- `YGGR_PP_ANY_VAL_UNREGISTER_UNARY_OPERATOR_UNSAFE`
- `YGGR_PP_ANY_VAL_UNREGISTER_MUTABLE_UNARY_OPERATOR_UNSAFE`
- `YGGR_PP_ANY_VAL_UNREGISTER_BINARY_OPERATOR`
- `YGGR_PP_ANY_VAL_UNREGISTER_MUTABLE_BINARY_OPERATOR`
- `YGGR_PP_ANY_VAL_UNREGISTER_BINARY_OPERATOR_UNSAFE`
- `YGGR_PP_ANY_VAL_UNREGISTER_MUTABLE_BINARY_OPERATOR_UNSAFE`

注销宏与注册宏类似，用于注销已注册的操作符。

## 用法示例

```cpp
// 注册一元操作符
YGGR_PP_ANY_VAL_REGISTER_UNARY_OPERATOR(pmgr, foo_name, param);

// 注销二元操作符
YGGR_PP_ANY_VAL_UNREGISTER_BINARY_OPERATOR(pmgr, foo_name, left, right);
```

## 平台与安全性支持

- 针对 MinGW 平台和不安全类型的特殊处理，避免因类型不安全或平台限制导致的问题。
- 通过宏控制是否注册/注销不安全类型的操作符。

## 依赖

- yggrdef.h

---

如需详细功能和实现细节，请参考相关实现文件和 `any_operator_mgr` 相关文档。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 any_operator_mgr.hpp 文件生成的文档说明：

---

# 文件：any_operator_mgr.hpp

## 简介

any_operator_mgr.hpp 是 yggdrasil 项目中用于管理和实现 `any` 类型（包括 `yggr::any` 和 `boost::any`）的操作符注册、调用与扩展的核心头文件。它通过操作符管理器类，实现了对 `any` 类型的算术、逻辑、位运算、比较、自增自减等操作的统一注册、注销和调用机制，并支持操作符的动态扩展。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 包含大量依赖头文件，涵盖类型特征、元编程、智能指针、线程安全容器、字符串、元组、函数信息、操作符标签等。
- 定义了操作符注册、注销相关的宏，简化操作符的批量声明。
- 实现了 `basic_any_operator` 及其派生类，封装了各种一元、二元、可变操作符的调用逻辑。
- 实现了 `any_operator_mgr` 模板类，作为操作符管理器，支持操作符的注册、注销、查找和调用。
- 提供了 `operator_id_maker`，用于生成操作符唯一标识。
- 通过 `_YGGR_ANY_VAL_ANY_OPERATOR` 宏为 `yggr::any` 和 `boost::any` 自动生成了常用操作符的重载，使其可以像内置类型一样使用操作符。

## 主要类与结构

### 1. `basic_any_operator` 及其派生类

- `basic_any_operator<Any>`：基础操作符接口，支持一元、二元、可变等多种操作符的多态调用。
- `any_unary_operator`、`any_mutable_unary_operator`、`any_ref_ret_mutable_unary_operator`、`any_binary_operator`、`any_mutable_binary_operator`：分别实现不同类型操作符的具体逻辑。

### 2. `operator_id_maker`

- 用于根据操作符标签和参数类型生成唯一的操作符ID，便于操作符的注册和查找。

### 3. `any_operator_mgr`

- 模板类，负责管理某种 `any` 类型的所有操作符注册、注销和调用。
- 支持一元、二元、可变等多种操作符的注册与注销。
- 提供了 `call_*` 系列方法，统一调用已注册的操作符。
- 内部使用线程安全的哈希表存储操作符。

### 4. 操作符重载宏

- 通过 `_YGGR_ANY_VAL_ANY_OPERATOR` 宏，为 `yggr::any` 和 `boost::any` 自动生成了常用操作符的重载（如 `+`, `-`, `*`, `/`, `==`, `!=`, `++`, `--` 等），使其用法与内置类型一致。

## 用法示例

```cpp
#include <yggr/any_val/any_operator_mgr.hpp>

// 注册操作符
yggr::any_val::any_operator_mgr<yggr::any> mgr;
mgr.register_plus<int, int>();

// 使用操作符
yggr::any a = 1, b = 2;
yggr::any c = a + b; // 实际调用了操作符管理器中的 plus 操作
```

## 依赖

- any.hpp
- operator_wrap.hpp
- ptr_single.hpp
- safe_unordered_map.hpp
- operator_tags.hpp
- 以及 Boost、元编程、智能指针等相关库

---

如需详细功能和实现细节，请参考本文件实现及相关依赖头文件。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 `any_operator_mgr.hpp` 文件生成的文档说明：

---

# 文件：any_operator_mgr.hpp

## 简介

`any_operator_mgr.hpp` 是 yggdrasil 项目中用于管理和实现 `any` 类型（如 `yggr::any` 或 `boost::any`）操作符注册与调用的核心头文件。它为 `any` 类型提供了统一的操作符注册、注销和调用机制，使 `any` 类型能够像内置类型一样支持各种算术、逻辑、比较和位运算操作。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 提供操作符管理器类模板（如 `any_operator_mgr`），用于注册和管理针对 `any` 类型的各种操作符。
- 支持一元、二元、可变参数等多种操作符的注册与调用。
- 通过宏和模板机制，简化操作符的批量注册和注销。
- 支持线程安全的操作符管理，适用于多线程环境。
- 便于扩展和自定义新的操作符。

## 用法示例

```cpp
#include <yggr/any_val/any_operator_mgr.hpp>

// 创建操作符管理器实例
yggr::any_val::any_operator_mgr<yggr::any> mgr;

// 注册加法操作符
mgr.register_plus<int, int>();

// 使用已注册的操作符
yggr::any a = 1, b = 2;
yggr::any c = mgr.call_plus(a, b); // 实现 a + b
```

## 依赖

- any.hpp
- operator_wrap.hpp
- ptr_single.hpp
- safe_unordered_map.hpp
- operator_tags.hpp
- 以及 Boost、元编程、智能指针等相关库

---

如需详细功能和实现细节，请参考本文件实现及相关依赖头文件。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 `any_operator_mgr.hpp` 文件生成的文档说明：

---

# 文件：any_operator_mgr.hpp

## 简介

`any_operator_mgr.hpp` 是 yggdrasil 项目中用于管理和实现 `any` 类型（如 `yggr::any` 或 `boost::any`）操作符注册与调用的核心头文件。它为 `any` 类型提供统一的操作符注册、注销和调用机制，使 `any` 类型能够像内置类型一样支持各种算术、逻辑、比较和位运算操作。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 提供操作符管理器类模板（如 `any_operator_mgr`），用于注册和管理针对 `any` 类型的各种操作符。
- 支持一元、二元、可变参数等多种操作符的注册与调用。
- 通过宏和模板机制，简化操作符的批量注册和注销。
- 支持线程安全的操作符管理，适用于多线程环境。
- 便于扩展和自定义新的操作符。

## 用法示例

```cpp
#include <yggr/any_val/any_operator_mgr.hpp>

// 创建操作符管理器实例
yggr::any_val::any_operator_mgr<yggr::any> mgr;

// 注册加法操作符
mgr.register_plus<int, int>();

// 使用已注册的操作符
yggr::any a = 1, b = 2;
yggr::any c = mgr.call_plus(a, b); // 实现 a + b
```

## 依赖

- any.hpp
- operator_wrap.hpp
- ptr_single.hpp
- safe_unordered_map.hpp
- operator_tags.hpp
- 以及 Boost、元编程、智能指针等相关库

---

如需详细功能和实现细节，请参考本文件实现及相关依赖头文件。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 any_set.hpp 文件生成的文档说明：

---

# 文件：any_set.hpp

## 简介

any_set.hpp 是 yggdrasil 项目中用于类型安全转换的辅助头文件。它通过宏定义，简化了将任意值安全地转换为指定类型的操作，常用于 `any` 类型相关的赋值或类型转换场景。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 定义了 `ANY_SET` 宏，用于将任意值转换为指定类型。

## 宏定义

```cpp
#define ANY_SET( __type__, __val__ ) static_cast< __type__ >( __val__ )
```

- `__type__`：目标类型。
- `__val__`：需要转换的值。
- 功能：将 `__val__` 以 `static_cast` 的方式转换为 `__type__`，实现类型安全的赋值。

## 用法示例

```cpp
int a = ANY_SET(int, 3.14); // a == 3
double b = ANY_SET(double, 42); // b == 42.0
```

## 适用场景

- 需要将 `any` 类型或其他类型的值安全地转换为目标类型时。
- 简化类型转换代码，提高可读性和安全性。

---

如需详细功能和实现细节，请参考本文件实现。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 any.hpp 文件生成的文档说明：

---

# 文件：any.hpp

## 简介

any.hpp 是 yggdrasil 项目中实现类型安全的通用容器 `yggr::any` 的核心头文件。`yggr::any` 类允许存储任意类型的对象，并在运行时安全地进行类型查询和转换，类似于 `boost::any`，但结合了自定义的内存管理和序列化支持。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 包含类型特征、序列化、内存管理、类型工具等相关依赖。
- 定义了 `yggr::any` 类，实现任意类型的存储、拷贝、移动、类型查询、类型安全转换等功能。
- 提供了类型安全的 `any_cast` 和 `unsafe_any_cast` 工具函数。
- 支持序列化和反序列化。
- 提供了异常类型 `yggr::bad_any_cast`，用于类型转换失败时抛出。
- 支持与标准库和 Boost 的 `swap` 机制集成。

## 主要类与函数

### 1. `yggr::any`

- 支持存储任意类型的对象。
- 支持拷贝构造、移动构造、赋值、移动赋值、swap 等操作。
- 提供 `empty()` 判断是否有内容，`type()` 查询存储类型。
- 内部采用小对象优化（Small Object Optimization），提升性能。
- 支持序列化（通过 Boost.Serialization）。

### 2. `yggr::any_cast` 和 `yggr::unsafe_any_cast`

- `any_cast<T>(any&)`：类型安全地将 `any` 转换为指定类型，类型不匹配时抛出 `bad_any_cast`。
- `unsafe_any_cast<T>(any&)`：不进行类型检查，直接转换，适合已知类型场景。

### 3. `yggr::bad_any_cast`

- 继承自 `std::bad_cast`，用于类型转换失败时抛出异常。

### 4. swap 支持

- 提供 `swap` 支持，可与标准库和 Boost 的 `swap` 机制无缝集成。

## 用法示例

```cpp
#include <yggr/any_val/any.hpp>

yggr::any a = 10;
int value = yggr::any_cast<int>(a); // value == 10

a = std::string("hello");
std::string str = yggr::any_cast<std::string>(a); // str == "hello"

// 类型不匹配时抛出异常
try {
    double d = yggr::any_cast<double>(a);
} catch(const yggr::bad_any_cast& e) {
    // 处理类型转换失败
}
```

## 依赖

- Boost.TypeTraits、Boost.Serialization、Boost.TypeIndex 等 Boost 组件
- yggdrasil 项目相关基础设施

---

如需详细功能和实现细节，请参考本文件实现及相关依赖头文件。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 operator_wrap.hpp 文件生成的文档说明：

---

# 文件：operator_wrap.hpp

## 简介

operator_wrap.hpp 是 yggdrasil 项目中用于封装各种基础操作符的工具头文件。该文件通过 `yggr::any_val::operator_wrap` 结构体，提供了丰富的静态模板方法，统一封装了常见的算术、逻辑、位运算、赋值、自增自减等操作符的实现，便于在泛型编程和 `any` 类型操作符管理器中复用和扩展。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 包含类型特征、元编程、数学运算、指针工具等相关依赖。
- 定义了 `yggr::any_val::operator_wrap` 结构体，封装了大量静态模板操作符方法。

## 主要结构体

### yggr::any_val::operator_wrap

#### 功能

- 封装了常见的操作符，包括：
  - 一元操作符：正号、负号、取反、逻辑非、解引用、取地址、自增自减等
  - 二元操作符：加、减、乘、除、模、位与、位或、位异或、左移、右移、比较等
  - 赋值操作符：=、+=、-=、*=、/=、%=、&=、|=、^=、<<=、>>=
  - 逻辑操作符：&&、||、!
  - 支持自定义返回类型的 custom 版本，便于特殊场景下的类型适配
- 支持指针类型的安全解引用和只读解引用
- 支持 move 语义的赋值

#### 典型方法

- `static L& self(L& l);`
- `static typename positive_operator_result<L>::type positive(const L& l);`
- `static typename negate_operator_result<L>::type negate(const L& l);`
- `static typename mplex::pointer_to_reference_t<L>::type dereference(L& l);`
- `static typename boost::add_pointer<L>::type addressof(L& l);`
- `static L& head_increment(L& l);`
- `static L tail_increment(L& l);`
- `static L& set(L& l, const R& r);`
- `static L& set_move(L& l, R& r);`
- `static typename plus_operator_result<L, R>::type plus(const L& l, const R& r);`
- `static bool equal_to(const L& l, const R& r);`
- `static bool less(const L& l, const R& r);`
- 以及所有常见的算术、逻辑、位运算和比较操作符

#### 自定义返回类型方法

- 提供 `*_custom` 方法，允许指定返回类型，便于特殊类型或包装类型的操作。

## 用法示例

```cpp
#include <yggr/any_val/operator_wrap.hpp>

int a = 5, b = 3;
int sum = yggr::any_val::operator_wrap::plus(a, b); // sum == 8

bool eq = yggr::any_val::operator_wrap::equal_to(a, b); // eq == false

int* p = &a;
int v = yggr::any_val::operator_wrap::dereference(p); // v == 5
```

## 适用场景

- 泛型编程中需要统一操作符调用接口时
- `any` 类型操作符管理器的底层实现
- 需要自定义返回类型或特殊类型操作时

## 依赖

- yggrdef.h
- move.hpp
- modulus.hpp
- operator_result.hpp
- native_t.hpp
- pointer_to_reference_t.hpp
- Boost.TypeTraits

---

如需详细功能和实现细节，请参考本文件实现及相关依赖头文件。

alucard-dracula: 为这个文件生成文档

GitHub Copilot: 以下是为 params.hpp 文件生成的文档说明：

---

# 文件：params.hpp

## 简介

params.hpp 是 yggdrasil 项目中用于实现通用参数集合容器的头文件。该容器以键值对形式存储任意类型的参数值（基于 `any`），并支持通过操作符管理器进行批量算术、逻辑、位运算等操作。它适用于需要动态参数管理、批量运算和类型安全访问的复杂场景。

## 版权声明

本文件遵循 MIT 许可证，允许自由使用、修改、分发和商业用途，但需保留原作者版权声明和许可信息。

 <!-- ## 作者 -->

 <!-- - xu yang -->

## 主要内容

- 头文件保护宏，防止重复包含。
- 包含类型定义、异常处理、序列化、容器、操作符管理等相关依赖。
- 定义了模板类 `yggr::any_val::params`，支持自定义键类型、操作符管理器、比较器、分配器和底层映射容器类型。
- 提供了丰富的成员函数和操作符重载，支持参数的增删查改、批量运算、序列化、类型安全访问等功能。
- 支持与标准库和 Boost 的 `swap` 机制集成。

## 主要模板类

### yggr::any_val::params

#### 模板参数

- `Key`：参数键类型。
- `Op_Mgr`：操作符管理器类型，默认为 `any_operator_mgr<>`。
- `Cmp`：键比较器类型，默认为底层 map 的比较器。
- `Alloc`：分配器类型，默认为底层 map 的分配器。
- `Map`：底层映射容器模板，默认为 `yggr::container::map`。

#### 主要成员类型

- `base_type`：底层 map 类型。
- `key_type`、`value_type`、`size_type` 等：常用类型别名。
- `op_mgr_type`：操作符管理器类型。
- `op_mgr_ptr_type`：操作符管理器指针类型。

#### 主要成员函数

- 构造、拷贝、移动、赋值、swap 等基本操作。
- `clear()`、`erase()`、`empty()`、`size()`：容器管理。
- `get_val_ptr<T>(key)`、`get_value<T>(key)`：类型安全地获取参数值指针或引用。
- `safe_get_val_ptr<T>(key)`、`unsafe_get_val_ptr<T>(key)`：安全/非安全获取值指针。
- `operator[]`：访问或插入参数。
- `copy_from`、`merge_datas_from`、`swap_datas`：批量数据操作。
- `val_export`、`val_import`：自定义导入导出接口。
- `type(key)`、`type_name(key)`：查询参数类型信息。
- 支持一元、二元操作符（如 `+`, `-`, `*`, `/`, `&`, `|`, `^`, `<<`, `>>` 及其复合赋值），通过操作符管理器批量作用于所有参数。
- `equal_to`：判断两个参数集合是否相等。

#### 错误处理

- 内置错误码和错误消息，支持参数不存在、操作符缺失、序列化不支持等异常场景。

#### 序列化支持

- 支持基于 `yggr::any` 的序列化。
- 对 `boost::any` 类型参数，序列化时抛出异常。

## 非成员操作符重载

- 支持参数集合的加减乘除、位运算、比较等操作符的全局重载，便于直接使用 `+`, `-`, `*`, `/`, `==`, `!=` 等操作。

## swap 支持

- 提供 `swap` 支持，可与标准库和 Boost 的 `swap` 机制无缝集成。

## 用法示例

```cpp
#include <yggr/any_val/params.hpp>

yggr::any_val::params<std::string> p1, p2;
p1["a"] = 10;
p2["a"] = 20;

auto p3 = p1 + p2; // 对相同 key 的值执行加法
int val = p3.get_value<int>("a"); // val == 30
```

## 依赖

- any_operator_mgr.hpp
- any_set.hpp
- map.hpp
- exception_sort.hpp
- error_make.hpp
- access.hpp
- 以及 Boost、yggdrasil 项目相关基础设施

---

如需详细功能和实现细节，请参考本文件实现及相关依赖头文件。